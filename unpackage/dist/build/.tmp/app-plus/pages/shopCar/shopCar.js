(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopCar/shopCar"],{"02c1":function(o,e,t){"use strict";(function(o,t){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{dataList:[{storeName:"王小二旗舰店",storeChose:!1,checkedCount:0,goodsList:[{image:"/static/images/img_14_sy.png",name:"新西兰皇家红苹果6个约135g/个90元包邮到家送货上门",price:128,nums:1,goodsChose:!1},{image:"/static/images/img_14_sy.png",name:"新西兰皇家红苹果6个约135g/个90元包邮到家送货上门",price:128,nums:1,goodsChose:!1}]},{storeName:"王小二旗舰店",storeChose:!1,checkedCount:0,goodsList:[{image:"/static/images/img_14_sy.png",name:"新西兰皇家红苹果6个约135g/个90元包邮到家送货上门",price:128,nums:1,goodsChose:!1}]}],isCheckAll:!1,allShops:0,allPrice:0,allCount:0,updateFonts:"编辑",handleFonts:"结算"}},onLoad:function(){n=this},onShow:function(){n.getMyShoppingCar(),n.isCheckAll=!1},watch:{dataList:{deep:!0,handler:function(o,e){n._totalPrice(),n._totalCount()}}},methods:{getMyShoppingCar:function(){n.Api.shopingcart({token:o.getStorageSync("token")},function(o){console.log(t(o," at pages\\shopCar\\shopCar.vue:162")),1===o.code?(o.data.forEach(function(o){o.storeChose=!1,o.checkedCount=0,o.data.forEach(function(o){o.images&&(-1===o.images.split(",")[0].indexOf("http")?o.images=n.Api.baseUrl+o.images.split(",")[0]:o.images=o.images.split(",")[0]),o.goodsChose=!1})}),n.dataList=o.data):n.myTools.myShow(o.msg,!0)})},settlement:function(e){if("结算"===e){var s=[],a=[];n.dataList.forEach(function(o){o.data.forEach(function(o){o.goodsChose&&(s.push(o.goods_id),a.push({id:o.goods_id,num:o.num}))})}),0===s.length?n.myTools.myShow("请选中要购买的商品哦~"):o.navigateTo({url:"/pages/index/buyingVegetables/confirmOrderShopCar?carIds="+JSON.stringify(s)+"&nums="+JSON.stringify(a)})}else"删除"===e&&o.showModal({title:"提示",content:"确定删除吗？",success:function(e){if(e.confirm){var s=[];n.dataList.forEach(function(o){o.data.forEach(function(o){o.goodsChose&&s.push(o.id)})}),0===s.length?n.myTools.myShow("请选中要删除的商品"):n.Api.shopingcartDelete({ids:JSON.stringify(s),token:o.getStorageSync("token")},function(o){console.log(t(o," at pages\\shopCar\\shopCar.vue:228")),1===o.code?(n.myTools.myShow("删除成功",!0),n.getMyShoppingCar()):n.myTools.myShow(o.msg,!0)})}else e.cancel&&console.log(t("用户点击取消"," at pages\\shopCar\\shopCar.vue:238"))}})},updateCar:function(o){"编辑"===o?(n.updateFonts="完成",n.handleFonts="删除"):(n.updateFonts="编辑",n.handleFonts="结算")},choseStore:function(o){o.storeChose?n._shopFalse(o):n._shopTrue(o)},_shopTrue:function(o){o.data.forEach(function(e){!1===e.goodsChose&&n._checkTrue(o,e)})},_shopFalse:function(o){o.data.forEach(function(e){!0===e.goodsChose&&n._checkFalse(o,e)})},choseGoods:function(o,e){e.goodsChose?n._checkFalse(o,e):n._checkTrue(o,e)},_checkTrue:function(o,e){e.goodsChose=!0,++o.checkedCount===o.data.length&&(o.storeChose=!0),o.storeChose&&(++n.allShops===n.dataList.length?n.isCheckAll=!0:n.isCheckAll=!1)},_checkFalse:function(o,e){e.goodsChose=!1,--o.checkedCount,o.storeChose&&(o.storeChose=!1,--n.allShops),n.isCheckAll=!1},checkAll:function(){n.isCheckAll=!n.isCheckAll,n.isCheckAll?n.dataList.forEach(function(o){n._shopTrue(o)}):n.dataList.forEach(function(o){n._shopFalse(o)})},changeCount:function(o,e){e>0?o.num++:1===o.num||o.num--},_totalPrice:function(){n.allPrice=0,n.dataList.forEach(function(o){o.data.forEach(function(o){o.goodsChose&&(n.allPrice+=Number(o.price)*Number(o.num))})})},_totalCount:function(){n.allCount=0,n.dataList.forEach(function(o){n.allCount+=o.checkedCount})}}};e.default=s}).call(this,t("6e42")["default"],t("0de9")["default"])},"7c8c":function(o,e,t){"use strict";(function(o){t("38eb"),t("921b");n(t("66fd"));var e=n(t("7e48"));function n(o){return o&&o.__esModule?o:{default:o}}o(e.default)}).call(this,t("6e42")["createPage"])},"7e48":function(o,e,t){"use strict";t.r(e);var n=t("d6c8"),s=t("d3c2");for(var a in s)"default"!==a&&function(o){t.d(e,o,function(){return s[o]})}(a);t("e08f");var c,i=t("f0c5"),u=Object(i["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);e["default"]=u.exports},b935:function(o,e,t){},d3c2:function(o,e,t){"use strict";t.r(e);var n=t("02c1"),s=t.n(n);for(var a in n)"default"!==a&&function(o){t.d(e,o,function(){return n[o]})}(a);e["default"]=s.a},d6c8:function(o,e,t){"use strict";var n,s=function(){var o=this,e=o.$createElement;o._self._c},a=[];t.d(e,"b",function(){return s}),t.d(e,"c",function(){return a}),t.d(e,"a",function(){return n})},e08f:function(o,e,t){"use strict";var n=t("b935"),s=t.n(n);s.a}},[["7c8c","common/runtime","common/vendor"]]]);